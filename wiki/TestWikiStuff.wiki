#summary test out wiki stuff

<g:plusone size="medium"></g:plusone>
<wiki:gadget url="http://gwt-examples.googlecode.com/svn/trunk/DemoGadgetXml/war/gadget-gwt-examples-ads-v2-atf.xml" height="100" width="740" border="0" />


Test this out

{{{

@PersistenceCapable
@Version(strategy = VersionStrategy.VERSION_NUMBER, extensions = { @Extension(vendorName = "datanucleus", key = "key", value = "version") })
public class WalletData {

@PrimaryKey
  @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
  private Key key;
  
  @Persistent
  private Integer version;
 
  /**
   * entity owner - the person who's logged in
   */
  @Persistent
  private Long userId; 
  
  @Persistent
  private String name;
  
  @Persistent(defaultFetchGroup = "true", dependentElement = "true")  
  private List<WalletItemData> items;
 
  
  public void setId(Long id) {
    if (id == null) {
      return;
    }
    this.key = KeyFactory.createKey(UserData.class.getName(), id);
  }
  public Long getId() {
    Long id = null;
    if (key != null) {
      id = key.getId();
    }
    return id;
  }
  
  public void setVersion(Integer version) {
    this.version = version;
  }
  public Integer getVersion() {
    return version;
  }
  
  public void setUserId(Long userId) {
    this.userId = userId;
  }
  public Long getUserId() {
    return userId;
  }
  
  public void setName(String name) {
    this.name = name;
  }
  public String getName() {
    return name;
  }
  
  public void setItems(List<WalletItemData> items) {
    if (items == null) {
      this.items = null;
      return;
    }
    
    // TODO I'm not sure request factory will do this or not yet.
    ArrayList<WalletItemData> a = new ArrayList<WalletItemData>();
    Iterator<WalletItemData> itr = items.iterator();
    while(itr.hasNext()) {
      WalletItemData d = itr.next();
      if (d.getId() != null && d.getId() > 0) { // null on id to increment
        // need parentKey, to reference the owned entities
        d.setId(key, d.getId());
      }
      a.add(d);
    }
    
    this.items = a;
  }
  public List<WalletItemData> getItems() {
    return items;
  }

}

}}}

<wiki:gadget url="http://gwt-examples.googlecode.com/svn/trunk/DemoGadgetXml/war/gadget-gwt-examples-ads-v2-atf.xml" height="100" width="740" border="0" />
<g:plusone size="medium"></g:plusone>